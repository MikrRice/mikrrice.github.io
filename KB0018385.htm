<!DOCTYPE html>
<html dir="ltr" class="ltr tabbed date-calendar" data-doctype="true" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>KB0018385</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta http-equiv="cache-control" content="public"><meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link type="text/css" rel="stylesheet" href="KB_files/css_includes_doctype.css"><link type="text/css" rel="stylesheet" href="KB_files/source_sans_pro.css"><link type="text/css" rel="stylesheet" href="KB_files/heisenberg_all.css"> </head><body data-formname="ui_page_render" ontouchend="CustomEvent.fireAll('body_clicked', event);" class="firefox windows        touch_scroll non_standard_lists" onclick="CustomEvent.fireAll('body_clicked', event);"><link type="text/css" rel="stylesheet" href="KB_files/css_includes_knowledge.css"><link type="text/css" rel="stylesheet" href="KB_files/b3ba3821d73221004792a1737e610382.css"><style>@media print{
		a[href]:after{
		content:none !important;
		}
		a[id=print] {
			display: none;
		}
		}
			p {
             padding-left:20px;
           }
		
		p {
            color:gray;
           }</style><div class="kb-view-content-wrapper"><div class="snc-article-header-title"><input style="display:none" id="articleTitleEditable" placeholder="Add title" autofocus="true" value="Q: What to do with P21 database when you upgrade your SQL server(2005/2008/2012)" class="snc-article-header-title-editable" type="text"><div class="snc-article-header-title-readonly snc-article-header-toolbar-title-no-image" style="" id="articleTitleReadonly">Q: What to do with P21 database when you upgrade your SQL server(2005/2008/2012)</div><div class="snc-article-header-number-readonly" style="" id="articleNumberReadonly">KB0018385</div></div><div id="Product"><b>Product this article applies to:</b><g2>&nbsp;Prophet 21</g2></div><div id="Models"></div><div id="Versions"></div><div><b>Published to customer portal:</b><span style="padding-left:5px">Yes</span></div><div class="snc-article-content-text" id="article" style="display: block;">Q: What to do with P21 database when you upgrade your SQL server(2005/2008/2012)<br><br>When
 moving a P21 database to a new SQL 2005/2008/2012 server from an older 
version of SQL, there are some things you will need to do in order to 
make sure everything works.  The following is a checklist of things you 
should do on the new server to make sure all important P21 and 
peripheral functions are working.<br><br>It's also recommended to review
 solution 27360 for additional tips, in case you want a plan on moving 
from 10.5 or earlier to 11.0 or higher.  Review solution 39295 if you 
plan on going to 12.0 as well as SQL 2008 or 2012.<br><br>Whenever you 
make a major change to your system, make sure you test your new 
configuration before going live on that new configuration.<br><br>Apply a build update<br>----------------------------------<br>If
 you are going from 2000 to 2005 or 2008, or going from 2005 to 2008, 
After moving your database to the new server, apply a build update to 
your P21 system.  Even if you are on the latest build of P21, apply the 
build again.  Scripts are run as part of the update to switch the 
database to be compatible with the SQL 2005 or 2008 components of your 
server.  The build update consists of both the .sql scripts that need to
 be run against the database and the Prophet21 executables that run 
against the code.<br><br>If you are going from 2000 to 2012, also see 
solution 45526.  Microsoft does not support going directly from 2000 to 
2012 at this time, you'll need to use a 2005 or 2008 server first.  All 
other suggestions apply, however.<br><br>Profiles for Prophet 21<br>-----------------------------------<br>If your Server Name is changed you will need to edit the Profiles to reflect the new server name.<br>Solution: 6754 -- Q: How to create a database profile and set default profiles<br><br>SQL permissions<br>----------------------------<br>When
 you move your database to the new server, make sure you set up in SQL 
management studio all the appropriate logins for the new server and give
 them proper permission to the database.<br><br>In SQL 2000, you had to 
perform some extra steps to make sure permissions could be properly set 
when you move your database from one server to another.  If you go from 
2000 to 2005/2008/2012, you will need to do these steps one more time. 
In 2005/2008/2012, these steps are no longer required.<br><br>However, 
due to increased security, there may be some changes you need to make in
 order to allow users to log in without application crashes.  See 
solution 28951 for a known issue that can occur going to SQL 2005 SP2, 
and a SQL statement to correct this so that this problem doesn't occur.<br><br>Rebuild your alert system:<br>------------------------------------------<br>Log
 into your P21 database, go to your system admin module, select the 
system menu and select "Rebuild Alert System."  Follow the instructions 
to rebuild your alert system.<br><br>Alerts require code that exists 
outside the database, in portions of the SQL server setup.  This code is
 not backed up when you backup the database, because it's not in the 
database to begin with.  This function puts that code onto the server 
you restored the database to.<br><br>Maintenance Plans and SQL jobs<br>------------------------------------------------------<br>You
 may have had Maintenance plans and SQL jobs that ran processes 
frequently on your SQL server.  Examples include database and 
transaction log backups, rebuilding indexes, updating statistics, 
running SQL statements, etc.  Find out what these jobs were on your old 
server, if they even existed, and recreate them them to your new server.
  Contact your technical consultant if you need assistance in this at 
cams@epicor.com<br><br>Update statistics and rebuild indexes<br>----------------------------------------------------------<br>While
 not 100% necessary, when you go to a new version of SQL server from an 
old version, the SQL server will mark any statistics you have in the 
database as "invalid."  This might reduce performance on your server a 
bit.  In the previous step you should have recreated your maintenance 
plans.  One should be to update statistics and rebuild indexes.  Make 
sure this is done.  Indexes are not "invalidated" but it's a good idea 
to make sure they are as up to date as possible.  This step can often be
 skipped, but if you have performance issues, this is one place to look 
first.<br><br>If you need SQL to do this, solution 4708 has that.<br><br>SQL Mail and the SQL agent<br>----------------------------------------------<br>In
 SQL 2005 and SQL 2008, we switch from using SQL mail to DB mail.  
Configure DB mail and the SQL server agent to use DB mail so you can 
continue to use workflow alerts.<br><br>B2BSeller and TPCx<br>---------------------------------<br>If
 the IP address, Server Name or Database name of change in your P21 
setup, then you need to change your settings for B2BSeller and TPCx.  
TPCx and B2BSeller systems are typically hosted.  You can have a support
 case and ask it to be forwarded to our hosting department to make the 
appropriate arrangements for changing things over.<br><br></div></div><div class="snc-article-header-author"><div class="snc-article-footer-metadata-published" style="display: block;padding-top: 5px" id="articleAuthor">Authored by Adrian Turkington 20070228</div><div class="snc-article-footer-metadata-published" id="articleModified">Last modified 9 months ago</div></div><div style="padding-left: 1px; width: 1px;"></div><div style="padding-left: 1px; width: 1px;"></div></body></html>
